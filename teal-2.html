
if (yy>fu1&&yy<fu2&&xx>fx) // –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Ñ–∞—Ä–≤–∞—Ç–µ—Ä  
	{
	//if((xx-fx)>15){xx=fx+20.7} // —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ç–∫–∏ –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤- –ø—Ä–∏ –∫–ª–∏–∫–µ –≤ –∫–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏, –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∫–≤–∞–¥—Ä–∞—Ç—ã —à–∏—Ä–∏–Ω–æ–π 20,7
	if((xx-fx-5)>ww){xx=fx+ww}
	//if((xx-fx)>55){xx=fx+50}
	//console.log(xx-fx);
	//alert(yy+ ' '+fu1+' '+fu2);
	yrr.push({x:fx,y:fu1,w:xx-fx,h:fu2-fu1,
	stroke:'red',opacity:'0.2',fill:'lime',a:' ',});
	fx=xx;
	fu1=fu1; // –∫–∞–∂–¥—ã–π —â–µ–ª—á–µ–∫ –∑–∞–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞—Ä–≤–∞—Ç–µ—Ä
	fu2=fu2;		
	}
	else
	{
	yrr.push({x:xx,y:yy,w:ww,h:hh,
	stroke:'red',opacity:'0.2',fill:'lime',a:' ',});
	fx=xx+ww;
	fu1=yy; // –∫–∞–∂–¥—ã–π —â–µ–ª—á–µ–∫ –∑–∞–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞—Ä–≤–∞—Ç–µ—Ä
	fu2=yy+hh;	
	
	}

fx_wat();// —Å–ª–µ–∂–∫–∞ –∑–∞ fx
let w=yrr.push()-1;
q=w;// –∫—É—Ä—Å–æ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤//
ben=true;
g.innerHTML+=`<rect id=ux${w} x=${(yrr[w].x).toFixed(1)} y=${yrr[w].y} width=${(yrr[w].w).toFixed(1)} height=${yrr[w].h} opacity=.2 fill=lime stroke=red onclick=fn(this,this.getAttribute('fill'),${w})></rect>`;
">
<line id="line" x1="0" y1="1" x2="0" y2="2500" stroke="teal" />
</svg>
</button>
<!--  opacity=.2 fill=lime stroke=red  -->
<!--   class=ink1 -->

<div id=i100>
<button id="btn3" style="margin-right:100px;padding: 4px;border-radius: 4px;font-size: 16px;">do group</button>
<button id="btn2" style="padding: 4px;border-radius: 4px;font-size: 16px;"
onclick="
	proga=proga^1^2;
	//alert(proga);
	if (proga===2){
	fa.style.display='none';
		nav.style.display='none';
		//kv.style.display='block';
		pro2.style.display='block';
		}
	if (proga===1){
		fa.style.display='flex';
		nav.style.display='flex';
		pro2.style.display='none';
		
		
		i.style.display='block';
		graf.style.display='grid';
		fa.style.display='flex';
		pex.style.display='flex';		
		
		}
	//
	console.log('jopa');
	ss=ta1.value;
	//ss='–ê–ë–í–ì';
	//–ê–ë–ë–ë–í–ì';//üê∏
	
	//ss='–ñ–£–ì–ò–ì–ë–ô–ì–Å–ë–ü–°–Å–í–ó–ù–í–ó–ñ–Å–ñ–ô–Å–î–¢–ê–§–î–ö–ê–ë–ß–ê–ö–ê–ë–ñ, –õ–ú–ê–õ–î–ò, –ê–ú–ë–ì–õ–í–ë–®–î–°–ó–í–û–ì–ó–ê–ô–í–ï–ò–ê–ï–ú–¶–û–í–ó–ü, –û–ü–ö–†–ö–í–ï–ï–î–õ–ì–ï–†–î–ù–ï–ñ–¢–ê–ô–ñ–ú–õ–î–†–ê–ù. –ë–ï–ë–ê–ì–ë–Å–ì–ù–•–ê–ò–ô–ê–Å–í–û–ê–ú–í–ö–ò';
	main(ss);
	

	btn1.onclick();//
"
> NEXT üîªÔ∏è </button>

</div>
<textarea id="ta1" rows="2" cols="90" style="color: white; background: #1a0e5a;">

</textarea>

</section>
	
<!-- end proga 2  -->		
	

	<div id=i>
		<article>
			<div id="m3"></div>
			<div id="m1"></div>
			<div id="m2"></div>
		</article>
		<div id="deep">
			<div id="platr" style="background: fuchsia;	"></div>
			<div id="plate"	style="background: purple;	"></div>		
		</div>
	</div>
	<form id="fa"></form>
	<p id="pex"></p>	
	
<div id="graf" onclick="
	dataru=!dataru;
	nom=['en','ru'][+dataru];// –∏–º—è –∞–ª—Ñ–∞–≤–∏—Ç–∞
	this.innerText=nom;
	ir[nom].forEach(x=>{x.style.visibility='visible'});
	ir[['en','ru'][+!dataru]].forEach(x=>{x.style.visibility='hidden'});

	conny(nom);
">ru</div>	

<script>

'use strict';
//*******************************************************************
//*******************************************************************
//**a, q,yrr,ben, fx, fu1, fu2, hb, bb, aa, alf, m, mySet, kax, kay, r,**
const kax=1.0;//2.06*0.49;//2.6;//1.6;//
const kay=1.0;//2.06*0.49;//2.6;
let fu1=0, fu2=0, fx=0;
let q=0;// –∫—É—Ä—Å–æ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
let bb=[];// –≤—Å–µ –≥—Ä—É–ø–ø–≤ –±—É–∫–≤
let r=false;
let ben=true;
//let ux;
let yrr=[


];
let bvb=[];// –≤—Å–µ –≥—Ä—É–ø–ø–≤ –±—É–∫–≤ + –º–µ—Ç–∫–∞

//function fn(x){x.setAttribute('fill',['lime','none'][1^['lime','none'].indexOf(x.getAttribute('fill'))])}
//let c=['lime','none'];
//let c=['none','lime'];
function fn(x,y,z)
	{
	ben=true;
	if(y=='lime')
	{x.setAttribute('fill','red');x.setAttribute('opacity','.5');yrr[z]['fill']='red'}
	if(y=='red')//else
	{x.setAttribute('fill','lime');x.setAttribute('opacity','.2');yrr[z]['fill']='lime'}
	if(y=='black')//else
	{x.setAttribute('fill','lime');x.setAttribute('opacity','.2');yrr[z]['fill']='lime'}
	r=true;
	q=z;//
	}

btn3.addEventListener('click',()=>{
	let m=[];
	/*let a7=[...document.querySelectorAll('[id^="ux"]')];


	*/
	//********** bb –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—é –≤ bvb
	 m=[];
	 let a7=[...document.querySelectorAll('[id^="ux"]')];
	a7.forEach((x,i)=>{if(x.getAttribute('fill')=='red')
		{
		x.setAttribute('fill','black');
		x.setAttribute('opacity','.5');
		m.push(i)}}); 
	bvb=bvb.filter(i=>!i.a.every(j=>m.includes(j)));// –ø–æ–¥–º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª—è—é
	m.forEach(x=>{bvb=bvb.map(i=>
	{return {a:i['a'].filter(k=>k!==x),s:i.s,}})
	});// –¥—É–±–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–¥–∞–ª—è—é
	//bvb=bvb.filter(i=>i['a'].length);//–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª–∏—Ç—å
	bvb=bvb.filter(i=>i.a.length);//–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª–∏—Ç—å
	if (m.length) bvb.push({a:m,s:''});

	bvb.sort((a,b)=>b.a.length-a.a.length);
	//**************
	///let alf='–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è';
	/*bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
	let aa=yrr.map(i=>i['a']).join('');
	console.log(bb);
	ta1.value=aa;*/
	//***********
	//bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});
	//let aa=yrr.map(i=>i['a']).join('');
	

	//**********–í–ï –ú–ë–ì–ì –Å–ï–ó –ê–í–ñ–ë–î–ò –ë –Å –í–ñ–ê –ó–ï–Å–í –í–ñ–ô–ë–ì–ì –ë–î –ò –ê–ö–ù–ê–ô–ë–ê–î–õ–ê

	bbgun();// –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≥—Ä—É–ø–ø
	
	//*******
		let alf='–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è';
		//bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
		//*********
		bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});	
		//**********
		let aa=yrr.map(i=>i['a']).join('');
		//console.log(bb);//console.log(aa);//
		ta1.value=aa;	
		console.log(bvb);
});

function svet(x){
console.log('—è –≤—ã–∑–≤–∞–ª—Å—è '+bb[x]);
let a=[...document.querySelectorAll('[id^="ux"]')];
//bb[x].forEach((y,i)=>{a[y].classList.toggle('ink1')});
//*******
bvb[x].a.forEach((y,i)=>{a[y].classList.toggle('ink1')});
}

function si(){// –æ–±—å–µ–¥–∏–Ω–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤
let a=[...document.querySelectorAll('[id^="ux"]')];
a.forEach(i=>{i.classList.remove('ink1')});
	let kiss=[...document.querySelectorAll('.uni')];
	let ra=[];
	kiss.forEach((x,i)=>{if(x.checked){
	//alert(`–æ–±—å–µ–¥–∏–Ω—è—à–∏ [${ra}] –∏ [${bb[i]}]`);
	ra=ra.concat(bb[i]);bb[i]=[];}});
	bb=bb.filter(i=>i.length);//–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª–∏—Ç—å
	//alert(ra);
	if (ra.length) bb.push(ra);
	bb.sort((a,b)=>b.length-a.length);
	//***********
	 ra=[];	
	kiss.forEach((x,i)=>{if(x.checked){
	//alert(`–æ–±—å–µ–¥–∏–Ω—è—à–∏ [${ra}] –∏ [${bb[i]}]`);
	//ra=ra.concat(bb[i]);bb[i]=[];}});	 
	ra=ra.concat(bvb[i].a);bvb[i].a=[];}});
	
	bvb=bvb.filter(i=>i.a.length);//–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª–∏—Ç—å
	//alert(ra);
	if (ra.length) bvb.push({a:ra,s:'!'});
	bvb.sort((a,b)=>b.a.length-a.a.length);	
	//***********
bbgun();// –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≥—Ä—É–ø–ø	
/*	let hb=bb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i[0]]['x']*kax)+'px top -'+
	(yrr[i[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'</label>');
	kv.innerHTML='<button id="b23"'+((bb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// –æ–±—å–µ–¥–∏–Ω—è–µ–º –≥—Ä—É–ø–ø—ã
	b24.onclick=ci;// –¥–µ—Å—Ç—Ä–æ–∏–º –≥—Ä—É–ø–ø—É	
	console.log(bb);
	*/
	let alf='–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è';
	//bb.forEach((x,i)=>{x.forEach(j=>{yrr[j]['a']=alf[i]})});
	//*********
	bvb.forEach((x,i)=>{x.a.forEach(j=>{yrr[j]['a']=alf[i]})});	
	//**********
	let aa=yrr.map(i=>i['a']).join('');
	//console.log(bb);//console.log(aa);//
	ta1.value=aa;	
	}
	
function ci(){ // –¥–µ—Å—Ç—Ä–æ–π –≥—Ä—É–ø–ø—ã
// –Ω–∞–π–¥–µ–º –æ–¥–Ω—É –≥—Ä—É–ø–ø—É –ø–æ–¥ —Å–Ω–æ—Å
// 
let a=[...document.querySelectorAll('label.ki')];
let a2=a.map(i=>i.querySelector('.uni').checked).filter(i=>i);
if(a2.length!==1) return;
let a3=document.querySelector('label.ki:has(.uni:checked)');
a=[...document.querySelectorAll('label.ki')];
let del;
a.forEach((x,i)=>{if(x.querySelector('.uni').checked){del=i; bb[i].forEach(y=>
	{
	let e=document.getElementById('ux'+y);
	e.setAttribute('opacity','.2');
	e.setAttribute('fill','lime');
	e.setAttribute('stroke','red');
	e.classList.remove('ink1');
	}
)}});
bb=bb.filter((x,i)=>i!==del);
//************
 del;
a.forEach((x,i)=>{if(x.querySelector('.uni').checked){del=i; bvb[i].a.forEach(y=>
	{
	let e=document.getElementById('ux'+y);
	e.setAttribute('opacity','.2');
	e.setAttribute('fill','lime');
	e.setAttribute('stroke','red');
	e.classList.remove('ink1');
	}
)}});
bvb=bvb.filter((x,i)=>i!==del);

//********
//alert(bb+'   '+del);
bbgun();// –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≥—Ä—É–ø–ø

}	

function bbgun(){// –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≥—Ä—É–ø–ø
	console.log('bvb='+bvb);
	/*console.log('bb='+bb);	
	let hb=bb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i[0]]['x']*kax)+'px top -'+
	(yrr[i[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'<div class="meta">'+'</div>\r\n'+//	+(bvb[j]['s']??'')
	'<div class="kolvo">'+bb[j].length+'</div>\r\n'+	
	'</label>');
	kv.innerHTML='<button id="b23"'+((bb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// –æ–±—å–µ–¥–∏–Ω—è–µ–º –≥—Ä—É–ø–ø—ã
	b24.onclick=ci;// –¥–µ—Å—Ç—Ä–æ–∏–º –≥—Ä—É–ø–ø—É	

	console.log(bb);*/
	//************
	//let
	let hb=bvb.map((i,j)=>
	'<label class="ki" onmousedown="svet('+j+')" style="background-position: left -'+
	(yrr[i.a[0]]['x']*kax)+'px top -'+
	(yrr[i.a[0]]['y']*kay)+'px">\r\n'+
	'<input class="uni" type="checkbox">\r\n'+
	'<div class="meta">'+(bvb[j]['s']??'')+'</div>\r\n'+	
	'<div class="kolvo">'+bvb[j]['a'].length+'</div>\r\n'+	
	'</label>');
	kv.innerHTML='<button id="b23"'+((bvb.length>1)?'':' style="visibility:hidden;"')+
	'>union</button>'+
	'<button id="b24"'+((bvb.length>0)?'':' style="visibility:hidden;"')+
	'>destroy</button>'+
	'<br>'+hb.join('');	

	b23.onclick=si;// –æ–±—å–µ–¥–∏–Ω—è–µ–º –≥—Ä—É–ø–ø—ã
	b24.onclick=ci;// –¥–µ—Å—Ç—Ä–æ–∏–º –≥—Ä—É–ø–ø—É	

	console.log(bvb);	
	//*************
}

function fx_wat(){// —Å–ª–µ–∂–∫–∞ –∑–∞ fx
	line.setAttribute('x1',fx);
	line.setAttribute('x2',fx);
	}
 //********************* –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –∫—É—Ä—Å–æ—Ä–Ω—ã–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏
 document.addEventListener('keydown', (e) => {// ‚Üê‚Üë‚Üì‚Üí
    //if(ux)
	
	if(!(yrr[q])) return 0;
	//alert(q);
	switch(e.keyCode) {
		case 40: {//‚Üì
		e.preventDefault();// —á—Ç–æ–±—ã –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª–æ—Å—å –∫—É—Ä—Å–æ—Ä–Ω—ã–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏
		 if(ben)
		  {
		  yrr[q]['y']=yrr[q]['y']+1;
		  fu1++;
		  fu2++;
		  }
		  else
		  {
		  yrr[q]['h']=yrr[q]['h']+1;
		  fu2++;
		  }
		  //ux.setAttribute('y',yrr[0]['y']);
		  //alert(ux.getAttribute('y'));
		  break;
		}
		case 38: {//‚Üë
		e.preventDefault();
			if(ben)
		  {	
		  yrr[q]['y']=yrr[q]['y']-1;
		  fu1--;
		  fu2--;
		  }
		  else
		  {
		  yrr[q]['h']=yrr[q]['h']-1;
		  fu2--;
		  }
		  break;
		}	  
		case 39: {//‚Üí
		e.preventDefault();
			if(ben)
			{
		  yrr[q]['x']=yrr[q]['x']+1;
		  fx++;
		  }
		  else
		  {
		  yrr[q]['w']=yrr[q]['w']+1;
		  fx++;
		  }
		  break;
		}
		case 37: {//‚Üê
		e.preventDefault();
			if(ben)
			{
		  yrr[q]['x']=yrr[q]['x']-1;
		  fx--;
		  }
		  else
		  {
		  yrr[q]['w']=yrr[q]['w']-1;
		  fx--;
		  }
		  break;
		}
		case 96: { // numpad0
			ben=!ben;
			yrr[q]['stroke']=['purple','red'][+ben];
			break;
		}
		case 32: //space
		btn3.click();
		
		default: break;
	  }
	  fx_wat();// —Å–ª–µ–∂–∫–∞ –∑–∞ fx
	  
	  let a=[...document.querySelectorAll('[id^="ux"]')];
	  a[q].setAttribute('x',(yrr[q]['x']).toFixed(1));
	  a[q].setAttribute('y',(yrr[q]['y']).toFixed(1));
	  a[q].setAttribute('width',(yrr[q]['w']).toFixed(1));
	  a[q].setAttribute('height',(yrr[q]['h']).toFixed(1));
	  /*a[q].setAttribute('opacity',yrr[q]['opacity']);	  
	  a[q].setAttribute('fill',yrr[q]['fill']);	  
	  a[q].setAttribute('stroke',yrr[q]['stroke']);*/
	  
	  }

	);
	
function shz(x){// –¥–æ–±–∞–≤–∏–ª –º–µ—Ç–∫—É –∫ –≥—Ä—É–ø–ø–µ
let a=[...document.querySelectorAll('.uni')];

//a.forEach((y,i)=>{if(y.checked){bbv[i]=x.innerText;   }});//alert(bbv); 
//******
a.forEach((y,i)=>{if(y.checked){bvb[i].s=x.innerText;  }});// alert(bvb); 
//******
bbgun();

}	
//**********************************************
//**‚ñà‚ñà‚ñà*‚ñà*‚ñà*‚ñà‚ñà‚ñà*****‚ñà‚ñà‚ñà**‚ñà***‚ñà**‚ñà‚ñà**************
//***‚ñà**‚ñà*‚ñà*‚ñà********‚ñà***‚ñà***‚ñà*‚ñà**‚ñà*************
//***‚ñà**‚ñà‚ñà‚ñà*‚ñà‚ñà‚ñà******‚ñà***‚ñà*‚ñà*‚ñà*‚ñà**‚ñà*************
//***‚ñà**‚ñà*‚ñà*‚ñà********‚ñà***‚ñà*‚ñà*‚ñà*‚ñà**‚ñà*************
//***‚ñà**‚ñà*‚ñà*‚ñà‚ñà‚ñà******‚ñà****‚ñà*‚ñà***‚ñà‚ñà**************
//**********************************************
/*–æ–±—å–µ–¥–∏–Ω–∏–ª –æ–±–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –æ–¥–Ω—É */
var proga=2;
/*
i.style.display='block';
graf.style.display='grid';
fa.style.display='flex';
pex.style.display='flex';
*/
var ir,ib;
let ws;// –∫–æ–æ—Ä–¥—ã —Ä–∞–∑–º–µ—Ä—ã –±–∞—à–µ–Ω


var dataru=1;
var droba=false; // —Å–ª–æ–≤–∞ –±–æ–ª–µ–µ 35 –±—É–∫–≤ –¥—Ä–æ–±–∏—Ç—å –Ω–∞ –º–µ–ª–∫–∏–µ


let ef='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
let nom='ru';

const z=
[{
      //  –ê  –ë  –í  –ì  –î  –ï  –Å  –ñ  –ó  –ò  –ô  –ö  –õ  –ú  –ù  –û  –ü  –† 
	  fq:[21,7 ,14,4 ,9 ,34,0 ,4 ,12,21,11,11,12,16,35,38,8 ,12,
		//  –°  –¢  –£  –§  –•  –¶  –ß  –®  –©  –™  –´  –¨  –≠  –Æ  –Ø  _
			18,19,8 ,2 ,5 ,1 ,4 ,3 ,2 ,0 ,13,3 ,0 ,0 ,11,45],
 af:[...'–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø'],
 qf:[...'–û–ù–ï–ê–ò–¢–°–ú–í–´–õ–ó–†–ô–ö–Ø–î–ü–£–ë–•–ì–ñ–ß–¨–®–§–©–¶–Æ–≠–™–Å'],
},

{
	// A   B   C   D   E   F   G   H   I   J   K   L   M
  fq:[ 82, 15, 28, 43,127, 22, 20, 61, 70,  2,  8, 40, 24, 

	//  N   O   P   Q   R   S   T   U   V   W   X   Y   Z
		68, 75, 19,  1, 60, 63, 91, 28, 10, 24,  2, 20,  1],	
 af:[...'ABCDEFGHIJKLMNOPQRSTUVWXYZ'],
 qf:[...'ETAOINSHRDLCUMWFGYPBVKJXQZ'],
},

];




let f;
let o; // –æ–±—å–µ–∫—Ç
let p;// –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–ª—è –∞–ª—Ñ–∞–≤–∏—Ç–∞ —à–∏—Ñ—Ä–æ—Ç–µ–∫—Å—Ç–∞
let hu,hi;
let t=[];// abcd
let s1;





function dragElement(ass) {//Make the DIV element draggagle:
	var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
	ass.onmousedown = dragMouseDown;

	function dragMouseDown(e) {
		e = e || window.event;
		// get the mouse cursor position at startup:
		pos3 = e.clientX;
		pos4 = e.clientY;
		document.onmouseup = closeDragElement;
		// call a function whenever the cursor moves:
		document.onmousemove = elementDrag;
		}

	function elementDrag(e) {
		e = e || window.event;
		// calculate the new cursor position:
		pos1 = pos3 - e.clientX;
		pos2 = pos4 - e.clientY;
		pos3 = e.clientX;
		pos4 = e.clientY;
		// set the element's new position:
		ass.style.top = (ass.offsetTop - pos2) + "px";
		ass.style.left = (ass.offsetLeft - pos1) + "px";
		}

	function closeDragElement() {
		/* stop moving when mouse button is released:*/
		document.onmouseup = null;
		document.onmousemove = null;
		conny(nom);// –≤—ã–≤–æ–¥ –¥–µ—à–∏
		}
}


/*
const ss='–ò –§–≠–ü–≠ –®–ò–©–†–Æ–°–©–¨–î –¶–ü–°–Æ–ñ–Æ. –ü–¶–°–î–ß–©–≠, –ñ–ë–´–†–°–•–≠, –ñ–Æ–ñ –ê–≠–°–ì–•–≠ –Æ–û–ë–¶–¨–ì–Æ–ì–•. –© –¨–Æ–ë–Æ–ö, –ñ–¶–ì–¶–ë–•–ö –ñ–Æ–õ–Æ–°–¨–ù –¨ –õ–≠–¢–°–© –¶–ú–≠–§–î –¶–ü–•–ñ–§–¶–ò–≠–§–§–•–¢, –í–°–•–° –§–Æ–ò–¨–ì–ë–≠–ú–´ –¶–ü–°–Æ–ñ–Æ–¢, –ü–´–®–ì–¶ –í–¶–®–§–ù–ì–•–ö –ò –§–≠–ü–¶ –ñ–¶–ë–Æ–ü–°–î. –Æ –®–ò–¶–ë –§–Æ–í–¶–¢–©–§–Æ–° –í–¶–ò–≠–ë–£–§–¶–¨–ì–î –í–°–Æ–§–≠–ì–•, –´–ò–©–®–≠–§–§–´–Ø –¨ –ñ–¶–¨–¢–©–ú–≠–¨–ñ–¶–ö –ò–•–¨–¶–ì–•. –¶–¨–ì–ë–¶–ò–ñ–© –í–•–°–î–§–¶–ö –ì–ë–Æ–ò–•, –í–≠–ë–≠–¨–•–í–Æ–§–§–¶–ö –¨–≠–®–•–¢–© –ß–Æ–ë–©–ñ–Æ–¢–© –¶–®–´–ò–Æ–§–ú–©–ñ–¶–ò, –ü–•–°–© –í–¶–£–¶–ê–© –§–Æ –õ–≠–°–≠–§–•–ö –Æ–ë–£–©–í–≠–°–Æ–†, –Æ –®–¶–ê–®–≠–ò–Æ–ù –ò–¶–®–Æ –ò –ü–¶–ú–ñ–≠ –´ –¨–Æ–ë–Æ–ù, –¨–°–¶–ò–§–¶ –ñ–ë–´–†–°–¶–≠ –¶–õ–≠–ë–¶ –ò –¶–ì–ò–≠–¨–§–•–£ –ü–≠–ë–≠–†–Æ–£, –¨–ò–≠–ì–©–°–¶–¨–î –†–¶–°–´–ü–¶–ö –¨–©–§–≠–ò–¶–ö. –¢–Æ–°–î–ú–©–ñ –°–Ø–ü–©–° –ò–¨–≠–¢–´ –§–Æ –¨–ò–≠–ì–≠ –®–Æ–ò–Æ–ì–î –©–¢–≠–§–Æ –© –§–Æ–õ–ò–Æ–§–©–ù. –¶–§–© –ò–¨–≠–†–®–Æ –í–ë–©–®–´–¢–•–ò–Æ–°–©–¨–î –¨–ë–Æ–õ–´. –õ–≠–ë–ñ–Æ–°–î–ï–≠ –ò–¶–®–• –ò –ü–¶–ú–ñ–≠ –¶–§ –§–Æ–õ–ò–Æ–° –¶–õ–≠–ë–¶–¢ –¨–©–§–≠–†–¶ –¨–ò–≠–ì–Æ, –Æ –í–ù–ì–§–Æ –ì–ë–Æ–ò–• –Æ–ë–£–©–í–≠–°–Æ–†–¶–¢ –§–≠–©–õ–ò–≠–®–Æ–§–§–•–£ –°–≠–¨–¶–ò.';

main(ss);
*/


function main(ss){
platr.innerHTML=z[0]['qf'].map((x,i)=>
	{return '<div class="ivan iba1" style="height:'+
	(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
	'px;">'+x+'</div>'}).join('');

plate.innerHTML=z[1]['qf'].map((x,i)=>
	{return '<div class="ivan iba2" style="height:'+
	(z[1]['fq'][z[1]['af'].indexOf(x)]/3+21)+
	'px;">'+x+'</div>'}).join('');



fa.innerHTML=[
		'<div class="ru">'+
		z[0]['qf'].map((x,i)=>
			{return '<div class="ivan ira1" style="height:'+
			(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
			'px;'+
			'">'+x+'</div>'}).join('')+'</div>',
		'<div class="en">'+	
		z[1]['qf'].map((x,i)=>
			{return '<div class="ivan ira2" style="height:'+
			(z[1]['fq'][z[1]['af'].indexOf(x)]/3+21)+
			'px;visibility:hidden'+
			'">'+x+'</div>'}).join('')+'</div>',		
	].join('');
/*
fa.innerHTML=z[0]['qf'].map((x,i)=>
	{return '<div class="ivan ira1" style="height:'+
	(z[0]['fq'][z[0]['af'].indexOf(x)]+21)+
	'px;">'+x+'</div>'}).join('');
*/
p=new Set([...ss].filter(x=>z[0]['af'].indexOf(x)>-1));
const d=Array.from(p).join('');//–≥–æ—Ä–¥
const q=[...ss].filter(x=>z[0]['af'].indexOf(x)>-1)// —á–∞—Å—Ç–æ—Ç–∞
	.reduce((a,x)=>{a[x]=~~a[x]+1;return a},{})
let c=z[0]['af'].filter(i=>i in q).sort((a,b)=>q[b]-q[a]).map(i=>q[i]-1);//21,14,13
const qa=z[0]['af'].filter(i=>i in q).sort((a,b)=>q[b]-q[a]).join('');//–æ—Ç–µ–∏c
//s1=[...ss].map(x=>(qa.indexOf(x)>-1)?z[0]['ef'][qa.indexOf(x)]:x).join('');
s1=[...ss].map(x=>(qa.indexOf(x)>-1)?ef[qa.indexOf(x)]:x).join('');
//s1=[...ss].map(x=>(qa.indexOf(x)>-1)?ef[qa.indexOf(x)]:x).join('');
//********************************************

const booa=[...ef].map(x=>{/// –æ–¥–Ω–æ–±—É–∫—ã–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
	let e=new RegExp('\\b'+x+'\\b','g');
	return e.test(s1);
});

const boob=[...ef].map(x=>{/// —É–¥–≤–æ–π–µ–Ω–Ω—ã–µ –±—É–∫–≤—ã
	let e=new RegExp(x+x);
	return e.test(s1);
});

let sot=new Set();// –¢–ò–ü–ê –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∑–∞–º–µ–Ω—ã
let key=[];
[...ss].forEach(x=>{
	if((z[0]['af'].indexOf(x)>-1)&&!sot.has(x))key.push(x); 
	sot.add(x)
});
key=key.concat(z[0]['af'].filter(x=>!sot.has(x)));


//***************************************
t=[];
//for (let i=0; i<d.length; i++){t.push(z[0]['ef'][i])}
for (let i=0; i<d.length; i++){t.push(ef[i])}
t=t.join('');
	
let iq4=[...t].map((x,i)=>//–∞–¥–¥–∏—Ç–∏–≤–Ω–æ–µ –æ–±—å–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –∫–æ–ª–æ–¥ - –Ω–µ–±–æ—Å–∫—Ä–µ–±—ã –∏ –±—É–∫–≤—ã
'<fieldset class="km'+
`${(booa[i])?' a':''}`+ //–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à—Ç—Ä–∏—Ö
`${(boob[i])?' b':''}`+ // –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω —à—Ç—Ä–∏—Ö
	'" style="left:'+(i*46)+'px">'+x+'</fieldset>').join('');	
fa.innerHTML+=iq4;
//*************************
ir={
	ru:[...document.querySelectorAll('.ira1')],
	en:[...document.querySelectorAll('.ira2')],
};// –ø–æ–¥–≤–∏–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
ib={
	ru:[...document.querySelectorAll('.iba1')],
	en:[...document.querySelectorAll('.iba2')],
};// –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã         
ir['ru'].forEach((x,i)=>{
	x.style.left = ib['ru'][i].offsetLeft+'px';
	x.style.top = ib['ru'][i].offsetTop+'px';
	});
ir['en'].forEach((x,i)=>{
	x.style.left = ib['en'][i].offsetLeft+'px';
	x.style.top = ib['en'][i].offsetTop+'px';
	});	
	

z[0]['af'].forEach((x,i)=>{dragElement(ir['ru'][i])});
z[1]['af'].forEach((x,i)=>{dragElement(ir['en'][i])});
//*****************************

hu=document.querySelectorAll('.km');
//c=c.map(x=>(!x)?1:x);//–∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –Ω—É–ª–µ–π
/*
console.log(c);////üê∏

let kit;
//c.forEach((x,i)=>kit=(!i)&&(!x));//
kit=(!c[0]);
console.log(kit);
c.forEach((x,i)=>{console.log(x)});//
hi=(!kit)?c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`):c.map(x=>'223px');
//hi=c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`);
console.log(hi);
*/
//version 14 file:///C:/Users/and/Documents/GitHub/js_zamena/simply14.html
//if(false)
if(true)
{
//c=c.map(x=>(!x)?1:x);//–∏–∑–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –Ω—É–ª–µ–π
let kin=false;
//c=c.map((x,i)=>kin=(!i)&&(!x));
if(c.length){kin=c[0]>0}
hi=(kin)?c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`):c.map(x=>'223px');
}
else
{
//alert(c);
hi=c.map((x,i)=>`${43+c[i]*400/c[0]|0}px`);
//alert(hi);
}


[...hu].forEach((x,i)=>{x.style.height=hi[i]});// –≤—ã—Å–æ—Ç–∞ –Ω–µ–±–æ—Å–∫—Ä–µ–±–æ–≤

const sit=()=>{
	ws=[...hu].map(x=>{return {// –∫–æ–æ—Ä–¥—ã –ø–æ—Å–∞–¥–æ—á–Ω—ã—Ö –º–µ—Å—Ç
		x1:x.offsetLeft,
		x2:x.offsetLeft+x.offsetWidth,
		y1:x.offsetTop,
		y2:x.offsetTop+x.offsetHeight
	}});
	ir['ru'].forEach((x,i)=>{
		x.style.left = ib['ru'][i].offsetLeft+'px';
		x.style.top = ib['ru'][i].offsetTop+'px';
		});
	ir['en'].forEach((x,i)=>{
		x.style.left = ib['en'][i].offsetLeft+'px';
		x.style.top = ib['en'][i].offsetTop+'px';
		});	
}

sit();// –ø–µ—Ä–µ—Å—á–µ—Ç –∫–æ–æ—Ä–¥ –ø–æ—Å–∞–¥–æ–∫
conny('ru');// –≤—ã–≤–æ–¥ –¥–µ—à–∏
conny('en');// –≤—ã–≤–æ–¥ –¥–µ—à–∏
window.onresize=()=>{
	sit();
	conny(nom);// –≤—ã–≤–æ–¥ –¥–µ—à–∏
}
//*******************
}// end main



function conny(pok){// –≤—ã–≤–æ–¥ –¥–µ—à–∏
	o=[...t].reduce((a,x)=>{a[x]='.'; return a},{});
	[...ir[pok]].forEach((x,i)=>{//'ru' 'en'
		let v=x.offsetLeft+ 12;
		let w=x.getBoundingClientRect().top+20;
		let b=x.innerText;
		for(let j=0; j<t.length;j++){//–≤ –∫–∞–∫—É—é –±–∞—à–Ω—é –ø–æ–ø–∞–ª
			f=w>ws[j].y1&&w<ws[j].y2;
			if(f&&(v>ws[j].x1)&&(v<ws[j].x2)){o[t[j]]=b}	
		}
	});
	m1.innerHTML=[...s1].map(x=>x).join('');//DAS
	m2.innerHTML=[...s1].map(x=>(x in o)?o[x]:x).join('');
	m3.innerHTML=m2.innerHTML;
}
 // document.addEventListener("DOMContentLoaded", ()=>{alert('–ù–µ —Ä—ã–ø–∞–π—Å—è. –ñ–º–∏ —Å—Ä–∞–∑—É [ NEXT üîªÔ∏è ]')});

</script>   
</body>
</html>
